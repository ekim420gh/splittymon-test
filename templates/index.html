<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Splittymon</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
  </head>
  <body>

    <!-- navbar -->
    <nav class="navbar" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="{{ url_for('upload_file')}}">
          <img src="{{ url_for('static', filename='img/digimon.png')}}">
          <!-- Photo is from this link: https://www.kindpng.com/picc/m/263-2639829_pixel-art-digimon-agumon-hd-png-download.png -->
        </a>

        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="navbarBasicExample" class="navbar-menu">
        <div class="navbar-start">
          <a class="navbar-item" href="{{ url_for('upload_file')}}">
            Home
          </a>

          <a class="navbar-item" href="{{ url_for('pro')}}">
            Splittymon Pro
          </a>

        </div>
      </div>
    </nav>

    <section class="section">
      <div class="container">
        <h1 class="title is-1">
          Welcome to Splittymon
        </h1>
        <br>
        <p class="subtitle">
          Splittymon is a user interface for <a href="https://github.com/deezer/spleeter">Spleeter</a> which uses machine learning to separate vocals from instruments.<br>
          How does it work? After you submit a file (.wav or .mp3) a zip folder containing 2 files will be be available for download.
        </p>
        <p class="subtitle">
          Get started by uploading a file below! <br>
          <i>** Because ML is involved, returning a zip file can take a few minutes **</i>
        </p>

        <form method=post enctype=multipart/form-data>
          <div id="file-js" class="file is-primary has-name">
            <label class="file-label">
              <input class="file-input" type="file" name="file">
              <span class="file-cta">
                <span class="file-icon">
                  <i class="fas fa-upload"></i>
                </span>
                <span class="file-label">
                  Choose a file...
                </span>
              </span>
              <span id="file-name" class="file-name">No file uploaded</span>
            </label>
            <div id="upload-and-load" class="pl-1">
              <input id="submit-button" class="button is-primary is-outlined" type="submit" onclick="loading()" value="Submit">
            </div>
          </div>
        </form>

        <script>
          const fileInput = document.querySelector('#file-js input[type=file]');
          fileInput.onchange = () => {
            if (fileInput.files.length > 0) {
              const fileName = document.querySelector('#file-js .file-name');
              fileName.textContent = fileInput.files[0].name;
            }
          }
        </script>

      </div>
    </section>

    <script type="text/javascript" src="{{ url_for('static', filename='js/upload.js') }}"></script>
  </body>
</html>
